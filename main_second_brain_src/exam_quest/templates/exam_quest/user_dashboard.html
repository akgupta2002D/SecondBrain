{% extends 'base_layout/home.html' %}
{% load static %}
{%block title%} Exam Quest {%endblock%}


{%block css%}
<link rel="stylesheet" href="{% static 'exam_quest/css/dashboard.css' %}" />

{%endblock%}



{%block app%}
<div class="exam_quest_main">
    <div class="exam_quest_dashboard_navbar">
        <h2 class="app_themed_text">Exam Quest</h2>
        <div class="exam_quest_navbar_items">
            <div id="quick_navigation">
                <h3>Quick Navigation</h3>
                <div class="dashboard-section">
                    <h4>Classes</h4>
                    <ul>
                        {% for class in classes %}
                        <li>{{ class.name }}</li>
                        {% endfor %}
                    </ul>
                </div>
                <div class="dashboard-section">
                    <h4>Subjects</h4>
                    <ul>
                        {% for subject in subjects %}
                        <li>{{ subject.name }} ({{ subject.class_level }})</li>
                        {% endfor %}
                    </ul>
                </div>
                <div class="dashboard-section">
                    <h4>Topics</h4>
                    <ul>
                        {% for topic in topics %}
                        <li>{{ topic.name }} ({{ topic.subject }})</li>
                        {% endfor %}
                    </ul>
                </div>
                <div class="dashboard-section">
                    <h4>Available Exams</h4>
                    <ul>
                        {% for exam in exams %}
                        <li>{{ exam.title }} ({{ exam.subject }})</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="exam_quest_content_area">
        <div class="user_information">
            <!-- User information can be added here -->
            <section id="available-exams">
                <h2>Available Exams</h2>
                {% if available_exams %}
                <ul>
                    {% for exam in available_exams %}
                    <li>
                        <h3>{{ exam.title }}</h3>
                        <p>{{ exam.description }}</p>
                        <p>Duration: {{ exam.duration }} minutes</p>
                        <p>Subject: {{ exam.subject }}</p>
                        <a href="{% url 'exam_view' exam.id %}" class="btn btn-primary">Start Exam</a>
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <p>No exams are currently available.</p>
                {% endif %}
            </section>
        </div>
        <div class="exam_quest_extra_information">
            <!-- Additional information can be added here -->
            <section id="exam-history">
                <h2>Your Exam History</h2>
                {% if user_attempts %}
                <table>
                    <thead>
                        <tr>
                            <th>Exam</th>
                            <th>Date</th>
                            <th>Score</th>
                            <th>Result</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for attempt in user_attempts %}
                        <tr>
                            <td>{{ attempt.exam.title }}</td>
                            <td>{{ attempt.start_time|date:"F d, Y" }}</td>
                            <td>{{ attempt.score|default_if_none:"-" }}</td>
                            <td>
                                {% if attempt.is_completed %}
                                    {% if attempt.score >= 6 %}
                                        Passed
                                    {% else %}
                                        Insufficient
                                    {% endif %}
                                {% else %}
                                    In Progress
                                {% endif %}
                            </td>
                            <td>
                                {% if attempt.is_completed %}
                                <a href="{% url 'exam_result' attempt.id %}" class="btn btn-secondary">View Result</a>
                                {% else %}
                                <a href="{% url 'exam_view' attempt.exam.id %}" class="btn btn-warning">Resume Exam</a>
                                {% endif %}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% else %}
                <p>You haven't taken any exams yet.</p>
                {% endif %}
            </section>
        </div>
    </div>
</div>
{%endblock %}




{%block script%}

<!-- <script src="{% static 'exam_quest/js/exam.js' %}"></script> -->
{%endblock%}